## 캐시 전략 보고서

### 시나리오
0. 테스트 코드 수행 시 1000여 건의 데이터를 임의로 삽입  
1. 상품 조회 1 (`@Cacheable`)
2. 상품 재고 감소 (`@CachePut`)
3. 상품 조회 2 (`@Cacheable`)
4. 상품 삭제 (`@CacheEvict`)
5. 상품 조회 3 (`@Cacheable`)
- `@Cache` 를 건 메소드와 걸지 않은 메소드를 차례대로 호출하여 수행 시간을 비교하였습니다.

---
### 수행 시간 비교
| 구분       | `@Cache`를 걸지 않은 경우 | `@Cache`를 건 경우 |
|----------|--------------------|----------------|
| 상품 조회 1  | 26ms               | 253ms          |
| 상품 재고 감소 | 42ms               | 13ms           |            
| 상품 조회 2  | 5ms                | 4ms            |
| 상품 삭제    | 14ms               | 8ms            |
| 상품 조회 3  | 4ms                | 3ms            |
- (참고) 테스트 코드 실행 로그 일부 캡처
```log
1. 상품 조회 1
2025-05-07T13:44:52.503Z  INFO 17348 --- [hhplus] [    Test worker] k.h.b.s.a.product.ProductCacheTest       : findEnd - findStart: 26
2025-05-07T13:44:52.756Z  INFO 17348 --- [hhplus] [    Test worker] k.h.b.s.a.product.ProductCacheTest       : findEndCache - findStartCache: 253

2. 상품 재고 감소
2025-05-07T13:44:52.835Z  INFO 17348 --- [hhplus] [    Test worker] k.h.b.s.a.product.ProductCacheTest       : decreaseEnd - decreaseStart: 42
2025-05-07T13:44:52.848Z  INFO 17348 --- [hhplus] [    Test worker] k.h.b.s.a.product.ProductCacheTest       : decreaseEndCache - decreaseStartCache: 13

3. 상품 조회 2
2025-05-07T13:44:52.853Z  INFO 17348 --- [hhplus] [    Test worker] k.h.b.s.a.product.ProductCacheTest       : find2End - find2Start: 5
2025-05-07T13:44:52.857Z  INFO 17348 --- [hhplus] [    Test worker] k.h.b.s.a.product.ProductCacheTest       : find2EndCache - find2StartCache: 4

4. 상품 삭제
2025-05-07T13:44:52.871Z  INFO 17348 --- [hhplus] [    Test worker] k.h.b.s.a.product.ProductCacheTest       : deleteEnd - deleteStart: 14
2025-05-07T13:44:52.879Z  INFO 17348 --- [hhplus] [    Test worker] k.h.b.s.a.product.ProductCacheTest       : deleteEndCache - deleteStartCache: 8

5. 상품 조회 3
2025-05-07T13:44:52.884Z  INFO 17348 --- [hhplus] [    Test worker] k.h.b.s.a.product.ProductCacheTest       : find3End - find3Start: 4
2025-05-07T13:44:52.888Z  INFO 17348 --- [hhplus] [    Test worker] k.h.b.s.a.product.ProductCacheTest       : find3EndCache - find3StartCache: 3
```

---
### 수행 시간 분석
- 캐시를 처음 적용하는 (`@Cacheable`) 시점에는 캐시를 걸지 않는 메소드보다 수행시간이 더 오래걸림
- 그러나 캐시를 처음 건 후에 재조회하거나 상품 재고 감소 등의 메소드를 수행 시 캐시를 걸지 않은 메소드보다 속도 면에 있어 더 나은 경향을 보임
  - 여러번 수행한 결과 캐시를 건 메소드의 수행 시간이 더 짧거나 같은 결과를 보임
- (참고) 테스트 코드 위치: /test/java/kr/hhplus/be/server/application/product/ProductCacheTest.java